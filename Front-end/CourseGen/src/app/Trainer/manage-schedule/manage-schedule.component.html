<div class="manage-schedule-container">
    <h2>Manage Teaching Schedule</h2>
    
    <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
    
    <div class="schedule-form">
      <h3>{{ isEditing ? 'Edit Schedule' : 'Add New Schedule' }}</h3>
      <form [formGroup]="scheduleForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="courseCode">Course Code</label>
              <input type="text" id="courseCode" class="form-control" formControlName="courseCode">
            </div>
            
            <div class="form-group">
              <label for="courseName">Course Name</label>
              <input type="text" id="courseName" class="form-control" formControlName="courseName">
            </div>
            
            <div class="form-group">
              <label for="day">Day</label>
              <select id="day" class="form-control" formControlName="day">
                <option *ngFor="let day of daysOfWeek" [value]="day">{{ day }}</option>
              </select>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-group">
              <label for="startTime">Start Time</label>
              <input type="time" id="startTime" class="form-control" formControlName="startTime">
            </div>
            
            <div class="form-group">
              <label for="endTime">End Time</label>
              <input type="time" id="endTime" class="form-control" formControlName="endTime">
            </div>
            
            <div class="form-group">
              <label for="location">Location</label>
              <input type="text" id="location" class="form-control" formControlName="location">
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="officeHours">Office Hours (optional)</label>
          <input type="text" id="officeHours" class="form-control" formControlName="officeHours" 
                 placeholder="e.g., Tuesday 2-4pm">
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">
            {{ isEditing ? 'Update' : 'Add' }} Schedule
          </button>
          <button type="button" class="btn btn-secondary" (click)="resetForm()" *ngIf="isEditing">
            Cancel
          </button>
        </div>
      </form>
    </div>
    
    <div class="day-selector">
      <h3>View Schedule by Day</h3>
      <ul class="nav nav-tabs">
        <li class="nav-item" *ngFor="let day of daysOfWeek">
          <a class="nav-link" [class.active]="selectedDay === day" (click)="onDayChange(day)">{{ day }}</a>
        </li>
      </ul>
    </div>
    
    <div class="schedule-day">
      <div *ngIf="filteredSchedules.length === 0" class="alert alert-info">
        No classes scheduled for {{ selectedDay }}
      </div>
      
      <div class="schedule-list">
        <div *ngFor="let schedule of filteredSchedules" class="schedule-item">
          <div class="schedule-info">
            <h4>{{ schedule.courseCode }} - {{ schedule.courseName }}</h4>
            <p><strong>Time:</strong> {{ schedule.startTime }} - {{ schedule.endTime }}</p>
            <p><strong>Location:</strong> {{ schedule.location }}</p>
            <p *ngIf="schedule.officeHours"><strong>Office Hours:</strong> {{ schedule.officeHours }}</p>
          </div>
          <div class="schedule-actions">
            <button class="btn btn-sm btn-primary" (click)="editSchedule(schedule)">Edit</button>
            <button class="btn btn-sm btn-danger" (click)="schedule.id && deleteSchedule(schedule.id)">Delete</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="weekly-view">
      <h3>Weekly Overview</h3>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Time</th>
            <th *ngFor="let day of daysOfWeek">{{ day }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let time of ['08:00', '10:00', '12:00', '14:00', '16:00', '18:00']">
            <td>{{ time }}</td>
            <td *ngFor="let day of daysOfWeek" [class.bg-primary]="hasClassAt(day, time)">
              <div *ngFor="let item of getClassesAt(day, time)">
                {{ item.courseCode }}<br>
                {{ item.location }}
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>